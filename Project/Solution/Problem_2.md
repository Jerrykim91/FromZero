
# Problem : 2차시 

진행중인 프로젝트에 관한 여러가지 이슈 그리고 해결방안을 포스팅하고자 한다. 

<br>

## 진행 상황

현재 전체적인 진행상황은 아래와 같다. 

- 이미지 분석 : 45 % 
- 텍스트 분석 : 89 %
- 시스템 구현 :  10% 

<br>
<br>

##  이슈 

### 이슈 1 : 모델 설계 

아이디어를 구체화 시키면서 쭉 생각하고 있던 아이디어였는데     
일단 우리 데이터는 학습 시킬 카테고리가 많다.      
즉, 이말은 한 모델이 이미지를 여러가지를 한번에 학습을 해야한다는 말이다.      
그러면 150개의 카테고리가 150/100이 된다는 말이 된다.          

나는 과연 이 작업이 얼마나 효율적일까라는 의구심을 가졌고      
이러한 생각이 들었다. 굳이 왜 한 모델에 무조건 다 넣어야만 하지?      
꼭 그렇게 해야할 필요가 있나? 라는 생각.        

그래서 나는 디렉토리를 레이블링을 하고 모델을 파이프라인으로 구축하거나      
트리화 시켜서 작업 하는것도 효율적일 것이라고 생각했다.      
마치 여과지를 통해 불순물을 걸러내는것처럼       
이미지도 각각이 가진 유사한 특징 별로 묶어서 큰 특징을 걸러내고      
그것을 토대로 잔잔한 특징들을 잡아내는 모델로 세세하게 잡아낸다면      
괜찮을 것이라고 생각했다. 

단점으로는 좀 많이 느리다는 점... 이부분은 좀더 공부를 한다면 보완이 가능하다고 나는 생각했다.

이아이디어는 누구도 나에게 도전해봐라, 시도해봐라, 가능은 하다라는 언급이 없어 배제하고 있었다.    
당연히 안될것같다라는 생각도 가지고 있었다.     
그런데 이번에 가능하다는 답을 얻었고 이를 진행 해보고자한다. 

<br>

```bash

# 상위 카테고리 
#    ㄴ 각각 카테고리를 모아서(file), 합쳐서 나열한다. 
#       => 모델을 만든다.
#
# 이렇게 만든 상위 모델에서 나온 값을 받아 
# 하위 카테고리
#    ㄴ 각 카테고리를 학습시킨다(dir), 합쳐서 나열한다. 
#
# 그 값을 if문을 이용해 탐색하요 하위 카테고리 모델로 전달하여 재학습 시킨다.  
# 현재까지 아이디어는 여기까지인데 

# 여기서 문제점이 있다. 

# 1. 상위모델은 하위 모델 보다 정확도가 높아야 한다. 
# 2. 하위모델은 적어도 정확도가 90은 나와야 한다. 
# 3. 입력으로 들어오는 이미지는 최대한 음식에 집중되어야 한다. 

```

<br>
<br>


### 이슈 2 : 이미지 전처리 

이전글에서 언급 했다시피 전처리와 모델을 잘 만드는것이 중요하다는것을 확인하게 되었고 전처리 작업부터 진행하기로 하였다.       
<br>
전처리 작업을 진행을 하면서 이미지들을 전체적으로 확인해보았다.      
아니나 다를까 이질적인 이미지 데이터가 포함이 되어있었다.       
이뿐만아니라 보유하고있는 이미지 데이터가 일정한 패턴을 보여야하는데 전혀 패턴을 확인 할 수 없었다.    
모델은 일정한 패턴을 기반으로 분류 모델을 통해 학습이 되어야하는데 전혀 없었다.    
오히려 전체적인 잡음이 너무 많았다. 이는 학습에 방해가 되기 때문에 최대한 데이터를 다듬어 줘야한다.     

그래서 전체적으로 고른것을 분류하고 
일정한 패턴을 수작업으로 살려  데이터를  전처리하였고 
각 카테고리 가 1,000장이라는 가정하에 70~80% 정도 살릴 수 있었다. 

<br>

### 이슈 3 : 모델 튜닝 - 상위 모델 


전처리를 하였지만 아직도 새로 만든 모델은 조금 과적합이 보였다.  
- 모델 튜닝을 통해서 이미지 인식률을 90~95% 사이까지 진행을 목표로 하고있다. 

1. 과적합 문제 해결 필요
2. 전처리 이미지 균등화 -> 품질확인 필요 
3. 이미지 인식률 최대한 향상 
4. 같은 모델일 필요 없다.