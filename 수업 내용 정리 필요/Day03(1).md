<br>

#### 03. 공공빅데이터 청년인턴십 - Day 03(1)

<br>

# R 프로그래밍

<br>

## 1. R 프로그래밍 작업 환경 만들기 

- R 과 R studio 설치 

<br>

### [R install](https://ftp.harukasan.org/CRAN/)<br>

<br>

1. R 사이트 접속한다. ->  https://www.r-project.org/ 
2. Download 의 CRAN 클릭하여 한국 서버 url 클릭하면 설치파일을 받을 수 있다.  (나라는 자신에게 맞는걸로)
3. 운영체제 선택한다. -> 자신의 운영체제와 버전에 맞게 선택한다. 
4. 설치 파일을 다운로드 한 후, 다운로드 받은 파일을 마우스 오른쪽 / 관리자 권한으로 실핼한다.  

<br><br>

### [R studio install](https://rstudio.com/products/rstudio/download/#download)<br>

<br>

1. R studio 사이트 접속한다. ->   https://rstudio.com/
2. products 에서 Free rstudio desktop 선택한다.
3. 윈도우 버전으로 설정한다.
4. 한글 인코딩은 `utf-8`으로 설정한다.
- `tools -> global options -> code -> saving` 에서 `utf-8` 선택한다. 

<br><br>


## 2. 스크립트 창에 있는 프로그램 실행하기

<br>

### 코드 실행하기

<br>

한줄만 실행 
- `"Run"` 혹은 `ctrl + enter`

여러줄 실행 
- 마우스로 여러줄 선택 후 `"Run"` 혹은 `ctrl + enter`

전체 실행  
- `"source"-"source with Echo"` 혹은 `ctrl + shift + enter`

<br>

```r
# test
str(cars)  # 데이터 구조, 변수 개수, 변수 명, 관찰치 개수, 관찰치의 미리보기
plot(cars) # 그래프 
cars       # 실행하기
```

<br><br>

### 작업 디렉토리 지정하기 
<br>

사용자가 지정한 디렉토리(폴더)에 데이터 파일을 저장하는 방법이다. <br>
파이썬의 `os`패키지의 일부 기능과 동일하다. 

<br>

```r
# test
getwd()         # 현재 작업 디렉토리를 보여준다. 
setwd('c:/r')   # 자신이 원하는 곳으로 지정 가능하다. 
```
<br>

### 라이브러리 설치 및 사용

<br>

#### 라이브러리(패키지)

라이브러리를 설치(하드디스크에 저장)하고, 불러오고 갱신하고 삭제 가능하다. 

<br>

- 라이브러리 설치 : `install.packages("ggplot2")`
- 라이브러리 삭제 : `remove.packages("ggplot2")`
- 라이브러리 갱신 : `update.packages("ggplot2")`

<br>

R은 패키지를 설치하고 불러와야한다. `import` 과 유사하다고 보면 된다. 

<br>

- 라이브러리 불러오기/ 호출하기 :  `library(ggplot2)`
- 호출된 라이브러리 목록 확인   :  `search()`

<br>

```R
install.packages("ggplot2") #
library(ggplot2) # 하드 디스크에서 주기억 장치로 할당
search() 
```

<br>

### **library 와 require의 차이**

`library()` 명령어로 라이브러리를 불러올 때 라이브러리가 없으면 오류가 나지만 `require()`는 라이브러리가 없어도 **그냥 무시한다는 차이**가 있다.

<br><br>


## 3. R 패키지 정리 

<br>

### 데이터 로드 

#### `RMySQL, RPostgresSQL, RSLite`

데이터베이스(DB)로부터 직접 데이터를 읽을 때 사용하는 패키지로     
R[데이터베이스명] `RMySQL`은 `MySQL`의 데이터들을 직접 `R`로 불러올 수 있다. 

<br>

```R
# RMySQL
install.packages("RMySQL") # 설치
library(RMySQL)  # 로딩

# `dbConnect()` 함수는 `MySQL` DB로 연결한한다. 

con <- dbConnect(
  MySQL(),
  user = 'uid',
  password = 'pwd',
  host = '127.0.0.1', # hostname
  dbname = 'test-db' # 연결할 db이름
)
dbSendQuery(con, 'set character set "utf8"') # utf8 지정 

```

<br>

#### `XLConnect, xlsx`

MS사의 엑셀을 R로 직접적으로 읽고 쓰게 가능하다. 


```R
# :: 불러오기
# XLConnect
install.packages("XLConnect") # 설치
library(XLConnect)  # 로딩
#  2003이하 버전, 2007이상 버전 모두 read 가능하다. 
wb <- XLConnect::loadWorkbook("파일명.xlsx") # 미리 정의 된 Excel 셀 스타일을 자동으로 가지고옴
sheet1 <- XLConnect::readWorksheet(wb, "Sheet1")
```

<br>

#### `foreign`

SAS, SPSS 데이터셋을 읽어올때 사용한다
SAS의 경우 `sas 7bdat` 확장자로 되어있는 파일인데 읽어올 때 `foreign` 패키지를 사용해서 읽어올 수 있다. 

<br>

#### 일반적인 텍스트 파일을 로드할 때, R 에서는 별다른 패키지가 필요하지 않다. 

`read.csv`, `read.table,` `read.fwf`를 이용하면 된다.
<!-- 이외의 독특한 자신만의 데이터셋을 불러오고 싶다면 CRAN guide에 데이터 `import`, `export`에 관해 문의가능하다.   -->

<br><br>

### 데이터 핸들링 

#### `dplyr`

데이터 `subsetting`, `summarizing`, `rearranging`, `joining`에 대한 더 쉬운 길을 제공한다. `dplyr` 는 빠른 핸들링을 위하여 반드시 사용하는 패키지이다. 

<br>

#### `tidyr`

`tidyr`는 데이터셋의 레이아웃을 바꿀 때 유용한 툴이다. 데이터를 `tidt format`으로 바꾸기 위해 `gather` 이나 `spread` 함수를 사용가능하다. 

<br>

#### `stringr`

`stringr` 문자열 다루는 것과 정규표현식 관련된 페키지이다. 

<br>

#### `lubridate`

date와 time을 다루기 쉽게 만드는 툴이다. 

<br>


### 데이터 시각화 

#### `ggplot2`

R에서 매우 유명한 시각화 패키지로 grammar of graphics를 활용하여 layered, customizable plot을 만들 수 있다는 장점이 있다. 

<br>

#### `ggvis`

grammar of graphics 기반으로 동작하는, 대화형 웹베이스 크래픽 라이브러리이다.

<br>

#### `rgl`

3D 시각화를 위한 라이브러리이다. 

<br>

#### `htmlwidgets`

자바스크립트 기반의 시각화를 위한 툴이다. 

<br>

#### `googleVis`

`R` 에서 데이터 시각화를 위해 구글 차트를 이용 할 수 있게한다.
구글 차트 툴은 `Gapminder` 라고 불린다.

<br><br>


### 데이터 모델링 

#### `car`

car 패키지의 Anova 함수는 type2, type3 아노바 테이블을 만드는데 유명하다. 

#### `mgcv`


#### `lme4 / nlme`

라이너 , 논 라이너 혼합효과모형


#### `randomForest`

머신러닝의 렌덤포레스트 

#### `multcomp`

다중비교를 위한 툴 

#### `vcd`

범주형 변수의 시각화 분석을 위한 툴 

#### `glmnet`

Lasso, elastic-net 회귀분석을 cross validation과 함깨 해준다. 

#### `survival`

생존분석

#### `caret`

회귀분석 및 분류 모델의 트레이닝을 위한 툴이다. 



```r

```

<br>




<br>

---

<br>

## Reference <br>

- R VScode install  &nbsp; : &nbsp;<https://ark1st.tistory.com/7> <br>
- R 패키지 참조  &nbsp; : &nbsp;<https://statkclee.github.io/data-science/data-science-library.html><br>
- 공공데이터  &nbsp; : &nbsp;<https://statkclee.github.io/data-science/data-science-library.html><br>
<br>
<br>

## Practice makes perfect! <br>

<!-- - [내용](주소) -->